main_collective = <%= @main_collective %>
collectives = <%= @collectives %>
libdir = <%= @libdir %>
logfile = <%= @logfile %>
loglevel = <%= @loglevel %>
daemonize = <%= @daemonize %>

# Plugins
securityprovider = <%= @securityprovider %>
plugin.psk = <%= @plugin_psk %>

direct_addressing = <%= @direct_addressing %>
<% if @connector == 'activemq' -%>
connector = activemq
plugin.activemq.pool.size = <%= @middleware_size %>
plugin.activemq.pool.1.host = <%= @middleware_hosts %>
plugin.activemq.pool.1.port = <%= @middleware_port %>
plugin.activemq.pool.1.user = <%= @middleware_user %>
plugin.activemq.pool.1.password = <%= @middleware_password %>
<% elsif @connector == 'rabbitmq' -%>
connector = rabbitmq
plugin.rabbitmq.vhost = <%= @rabbitmq_vhost %>
plugin.rabbitmq.pool.size = <%= @middleware_size %>
plugin.rabbitmq.pool.1.host = <%= @middleware_hosts %>
plugin.rabbitmq.pool.1.port = <%= @middleware_port %>
plugin.rabbitmq.pool.1.user = <%= @middleware_user %>
plugin.rabbitmq.pool.1.password = <%= @middleware_password %>
plugin.rabbitmq.heartbeat_interval = 30
plugin.rabbitmq.initial_reconnect_delay = 0.01
plugin.rabbitmq.max_reconnect_delay = 30.0
plugin.rabbitmq.use_exponential_back_off = true
plugin.rabbitmq.back_off_multiplier = 2
plugin.rabbitmq.max_reconnect_attempts = 0
plugin.rabbitmq.randomize = false
plugin.rabbitmq.timeout = -1
<% end -%>

<% if @identity -%>
identity = <%= @identity %>
<% end -%>
# Facts
factsource = <%= @factsource %>
plugin.yaml = <%= @plugin_yaml %>
